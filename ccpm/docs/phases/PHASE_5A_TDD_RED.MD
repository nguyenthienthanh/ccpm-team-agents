# PHASE 5A: TDD RED - Write Failing Tests

**Phase:** 5a of 9  
**Duration:** 4-8 hours  
**Goal:** Write comprehensive failing tests before implementation

---

## Objectives

1. Write ALL test cases from test plan
2. Ensure tests FAIL (no implementation yet)
3. Achieve 100% test case coverage
4. Set up test infrastructure

---

## Process

### 1. Review Test Plan

Read Phase 4 deliverable:
- Test plan document
- Test cases (all scenarios)
- Coverage goals

### 2. Set Up Test Environment

```bash
# Install dependencies
npm install --save-dev jest @testing-library/react

# Configure jest.config.js
# Set up test utilities
# Configure mocks
```

### 3. Write Test Files

```typescript
// Example: ShareModal.test.tsx
describe('ShareModal', () => {
  describe('Rendering', () => {
    it('renders modal when open', () => {
      render(<ShareModal isOpen={true} />)
      expect(screen.getByRole('dialog')).toBeInTheDocument()
    })
    
    it('does not render when closed', () => {
      render(<ShareModal isOpen={false} />)
      expect(screen.queryByRole('dialog')).not.toBeInTheDocument()
    })
  })
  
  describe('Platform Selection', () => {
    it('shows Facebook option', () => {
      render(<ShareModal isOpen={true} />)
      expect(screen.getByText('Facebook')).toBeInTheDocument()
    })
    
    // ... more tests
  })
  
  describe('Form Submission', () => {
    it('calls onSubmit with form data', async () => {
      const onSubmit = jest.fn()
      render(<ShareModal isOpen={true} onSubmit={onSubmit} />)
      
      await userEvent.type(screen.getByLabelText('Caption'), 'Test post')
      await userEvent.click(screen.getByText('Facebook'))
      await userEvent.click(screen.getByRole('button', { name: 'Post' }))
      
      expect(onSubmit).toHaveBeenCalledWith({
        platform: 'facebook',
        caption: 'Test post'
      })
    })
  })
})
```

### 4. Run Tests - MUST FAIL

```bash
$ npm test

FAIL  src/components/ShareModal.test.tsx
  â— ShareModal â€º renders modal when open
    Cannot find module '../ShareModal'
    
FAIL  src/hooks/useSharePost.test.ts
  â— useSharePost â€º posts to Facebook
    Cannot find module '../useSharePost'

Tests: 53 failed, 0 passed, 53 total
Time: 2.341s
```

**âœ… SUCCESS CRITERIA: ALL TESTS MUST FAIL**

Failure reasons should be:
- âŒ "Module not found" (component doesn't exist)
- âŒ "Function not defined" (hook doesn't exist)
- âŒ NOT logic errors (that means you implemented something!)

---

## Deliverables

### 1. Test Files
```
tests/
â”œâ”€â”€ ShareModal.test.tsx (15 tests)
â”œâ”€â”€ PlatformSelector.test.tsx (10 tests)
â”œâ”€â”€ useSharePost.test.ts (20 tests)
â””â”€â”€ shareApi.test.ts (8 tests)

Total: 53 tests
```

### 2. Test Report
```markdown
# Phase 5a: Test Report

## Tests Written: 53
## Tests Passing: 0 âŒ (Expected!)
## Tests Failing: 53 âœ… (All fail for right reason)

## Failure Breakdown:
- Module not found: 45 tests
- Function not defined: 8 tests
- Implementation errors: 0 tests âœ…

## Coverage Goals:
- Target: 85%
- Current: 0% (no code yet)

## Ready for Phase 5b: âœ… YES
```

---

## Approval Gate

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”´ PHASE 5A COMPLETE: TDD RED - Tests Written & Failing
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š Summary:
53 tests written, ALL FAILING as expected âœ…

ğŸ“¦ Deliverables:
   ğŸ“„ Test files (4 files, 53 tests)
   ğŸ“„ Test report
   ğŸ“„ Coverage configuration

âœ… Success Criteria:
   âœ… All tests written
   âœ… All tests fail with "not found" errors
   âœ… No implementation code written
   âœ… Test infrastructure ready

âš ï¸  CRITICAL: Tests MUST fail for correct reasons!
   âœ… "Module not found" - Good
   âœ… "Function undefined" - Good  
   âŒ "Expected X but got Y" - BAD (means you implemented!)

â­ï¸  Next Phase: Phase 5b - TDD GREEN (Implementation)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âš ï¸  ACTION REQUIRED

Type "workflow:approve" â†’ Proceed to Phase 5b
Type "workflow:reject <reason>" â†’ Revise tests
Type "workflow:modify <changes>" â†’ Adjust tests

Your response:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Common Mistakes

### âŒ DON'T:
- Write implementation code
- Skip test cases
- Write tests that pass
- Ignore edge cases

### âœ… DO:
- Write comprehensive tests
- Cover all scenarios
- Ensure proper failure messages
- Set up mocks correctly

---

**Next:** Phase 5b - TDD GREEN (Implementation)

